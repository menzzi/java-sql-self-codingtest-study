```java
import java.util.*;

class Solution {
    public int solution(String[] friends, String[] gifts) {
        int answer = 0;
        Map<String, Integer> index = new HashMap();
        for(int i = 0; i < friends.length; i++) {
            index.put(friends[i], i);
        }
        
        int[][] graph = new int[friends.length][friends.length];
        int[] degree = new int[friends.length];
        for(String g : gifts) {
            String[] gift = g.split(" ");
            int index1 = index.get(gift[0]);
            int index2 = index.get(gift[1]);
            graph[index1][index2]++;
            degree[index1]++;
            degree[index2]--;
        }
        
        for(int i = 0; i < friends.length; i++) {
            int count = 0;
            for(int j = 0; j < friends.length; j++) {
                if(i == j) continue;
                if(graph[i][j] > graph[j][i]) {
                    count++;
                } else if(graph[i][j] == graph[j][i] && degree[i] > degree[j]) {
                    count++;
                }
            }
            
            answer = Math.max(answer, count);
        }
            
        return answer;
    }
}
```
