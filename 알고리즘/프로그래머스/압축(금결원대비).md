```java
import java.util.*;

class Solution {
    public int[] solution(String msg) {
        List<Integer> output = new ArrayList<>();
        Map<String, Integer> dic = new HashMap<>();
        char ch = 'A';
        for(int i = 0; i < 26; i++) {
            dic.put(ch + "", i + 1);
            ch++;
        }
        
        int index = 27;
        int i = 0; 
        while(i < msg.length()) {
            String w = msg.charAt(i) + "";
            int j = i + 1;
            
            while(j <= msg.length()) {
                String wc = msg.substring(i, j);
                if(!dic.containsKey(wc)) break;
                w = wc;
                j++;
            }
            
            output.add(dic.get(w));
            
            if(j <= msg.length()) {
                String newStr = msg.substring(i, j);
                dic.put(newStr, index);
                index++;
            }
            i += w.length();
            
        }
        int[] answer = new int[output.size()];
        int idx = 0;
        for(int num : output) {
            answer[idx++] = num;
        }
        return answer;
    }
}
```
